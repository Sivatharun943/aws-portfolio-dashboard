<?xml version="1.0" encoding="UTF-8"?>
<svg width="900" height="550" xmlns="http://www.w3.org/2000/svg">
  <rect width="900" height="550" fill="#f8f9fa"/>
  <text x="450" y="35" font-family="Arial" font-size="20" font-weight="bold" text-anchor="middle" fill="#2c3e50">OpenSearch Log Aggregation</text>
  
  <rect x="30" y="180" width="110" height="70" fill="#FF9900" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="85" y="210" font-family="Arial" font-size="11" font-weight="bold" text-anchor="middle" fill="white">CloudFormation</text>
  <text x="85" y="230" font-family="Arial" font-size="9" text-anchor="middle" fill="white">Stack Deploy</text>
  
  <rect x="180" y="120" width="100" height="60" fill="#f39c12" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="230" y="147" font-family="Arial" font-size="11" font-weight="bold" text-anchor="middle" fill="white">Lambda</text>
  <text x="230" y="165" font-family="Arial" font-size="9" text-anchor="middle" fill="white">Function</text>
  
  <rect x="180" y="210" width="100" height="60" fill="#3498db" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="230" y="237" font-family="Arial" font-size="11" font-weight="bold" text-anchor="middle" fill="white">DynamoDB</text>
  <text x="230" y="255" font-family="Arial" font-size="9" text-anchor="middle" fill="white">Table</text>
  
  <rect x="180" y="300" width="100" height="60" fill="#e74c3c" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="230" y="327" font-family="Arial" font-size="11" font-weight="bold" text-anchor="middle" fill="white">IAM Role</text>
  <text x="230" y="345" font-family="Arial" font-size="9" text-anchor="middle" fill="white">Permissions</text>
  
  <rect x="330" y="150" width="130" height="90" fill="#9b59b6" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="395" y="180" font-family="Arial" font-size="11" font-weight="bold" text-anchor="middle" fill="white">CloudWatch</text>
  <text x="395" y="200" font-family="Arial" font-size="10" text-anchor="middle" fill="white">Log Groups</text>
  <text x="395" y="220" font-family="Arial" font-size="8" text-anchor="middle" fill="white">Log Streams</text>
  
  <rect x="510" y="150" width="130" height="90" fill="#1abc9c" stroke="#2c3e50" stroke-width="2" rx="5"/>
  <text x="575" y="175" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="white">Subscription</text>
  <text x="575" y="195" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="white">Filter</text>
  <text x="575" y="220" font-family="Arial" font-size="7" text-anchor="middle" fill="white">[timestamp, request_id, event]</text>
  
  <rect x="690" y="100" width="180" height="200" fill="#e8f5e9" stroke="#27ae60" stroke-width="3" rx="8"/>
  <text x="780" y="125" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#27ae60">Amazon OpenSearch</text>
  
  <rect x="710" y="145" width="140" height="50" fill="#27ae60" stroke="#2c3e50" stroke-width="1" rx="3"/>
  <text x="780" y="167" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="white">OpenSearch</text>
  <text x="780" y="183" font-family="Arial" font-size="9" text-anchor="middle" fill="white">Domain (Cluster)</text>
  
  <rect x="710" y="210" width="140" height="50" fill="#2ecc71" stroke="#2c3e50" stroke-width="1" rx="3"/>
  <text x="780" y="232" font-family="Arial" font-size="10" font-weight="bold" text-anchor="middle" fill="white">Dashboards</text>
  <text x="780" y="248" font-family="Arial" font-size="9" text-anchor="middle" fill="white">(Kibana)</text>
  
  <rect x="710" y="270" width="140" height="25" fill="#58d68d" stroke="#2c3e50" stroke-width="1" rx="3"/>
  <text x="780" y="287" font-family="Arial" font-size="8" text-anchor="middle" fill="white">Index: cwl-*</text>
  
  <line x1="140" y1="200" x2="175" y2="150" stroke="#2c3e50" stroke-width="2"/>
  <line x1="140" y1="215" x2="175" y2="240" stroke="#2c3e50" stroke-width="2"/>
  <line x1="140" y1="230" x2="175" y2="330" stroke="#2c3e50" stroke-width="2"/>
  
  <line x1="280" y1="150" x2="325" y2="180" stroke="#9b59b6" stroke-width="2"/>
  <polygon points="320,175 330,180 320,185" fill="#9b59b6"/>
  <text x="302" y="155" font-family="Arial" font-size="7" fill="#666">logs</text>
  
  <line x1="460" y1="195" x2="505" y2="195" stroke="#1abc9c" stroke-width="2"/>
  <polygon points="500,190 510,195 500,200" fill="#1abc9c"/>
  <text x="482" y="185" font-family="Arial" font-size="7" fill="#666">stream</text>
  
  <line x1="640" y1="195" x2="685" y2="195" stroke="#27ae60" stroke-width="2"/>
  <polygon points="680,190 690,195 680,200" fill="#27ae60"/>
  <text x="662" y="185" font-family="Arial" font-size="7" fill="#666">index</text>
  
  <rect x="30" y="400" width="840" height="130" fill="#ecf0f1" stroke="#bdc3c7" rx="5"/>
  <text x="450" y="425" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle" fill="#2c3e50">Implementation Flow</text>
  <text x="50" y="455" font-family="Arial" font-size="9" fill="#2c3e50">1. Deploy CloudFormation stack (Lambda, DynamoDB, IAM)</text>
  <text x="50" y="475" font-family="Arial" font-size="9" fill="#2c3e50">2. Test Lambda function to generate logs</text>
  <text x="50" y="495" font-family="Arial" font-size="9" fill="#2c3e50">3. Review logs in CloudWatch Log Groups</text>
  <text x="350" y="455" font-family="Arial" font-size="9" fill="#2c3e50">4. Create OpenSearch domain (t3.small.search)</text>
  <text x="350" y="475" font-family="Arial" font-size="9" fill="#2c3e50">5. Configure CloudWatch to OpenSearch streaming</text>
  <text x="350" y="495" font-family="Arial" font-size="9" fill="#2c3e50">6. Create index pattern (cwl-*) in Dashboards</text>
  <text x="650" y="455" font-family="Arial" font-size="9" fill="#27ae60" font-weight="bold">7. Visualize logs in Discover tab</text>
  <text x="650" y="475" font-family="Arial" font-size="9" fill="#e74c3c">8. Delete all resources after lab</text>
</svg>
